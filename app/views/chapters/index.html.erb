<h1>Chapters</h1>

<table>
	<tr>
		<th>Name</th>
		<th>State</th>
		<th colspan="3"></th>
	</tr>

	<%- chapter_sort_hash = {} %>
	<% @chapters.each do |chapter| %>
		<%- if chapter.state %>
			<%- chapter_sort_hash[chapter.state.name] = chapter %>
		<%- elsif chapter.page %>
			<%- chapter_sort_hash[chapter.name] = chapter %>
		<%- end %>
	<%- end %>
	<% chapter_sort_hash.sort_by{|key, chapter| key.downcase}.each do |key, chapter| %>
		<tr>
			<td><%= chapter.name %></td>
			<td>
			<%- if chapter.state %>
			<%= chapter.state.titleize_name %>
			<%- else %>
				N/A
			<%- end %>
			</td>
			<td><%= link_to 'Show', chapter_path(chapter) %></td>
			<td><%= link_to 'Edit', edit_chapter_path(chapter) %></td>
			<td><%= link_to 'Delete', chapter_path(chapter),
				method: :delete,
				data: { confirm: 'Are you sure?' } %>
			</td>
		</tr>
	<%- end %>
</table>
